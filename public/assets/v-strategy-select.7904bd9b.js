import{n as r}from"./index.59d9b3e2.js";import{v as u}from"./v-dropdown-menu.4adc44ee.js";var d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-9 d-flex align-items-center line-height-sm text-wrap pr-1"},[e("div",{staticClass:"mb-0",class:t.strategy.name.length<50?"h5":"title-text-truncate",attrs:{title:t.strategy.name}},[t._v(" "+t._s(t.strategy.name)+" ")])]),e("div",{staticClass:"col-3 d-flex align-items-center text-capitalize text-center"},[e("a",{staticClass:"btn btn-primary btn-sm btn-block",attrs:{href:"https://alphainsider.com/strategy/"+t.strategy.strategy_id,target:"_blank"}},[t._v("View")])])]),e("div",{staticClass:"row no-gutters pt-1"},[e("div",{staticClass:"col-9 d-flex align-items-center pr-1"},[e("a",{staticClass:"small text-nowrap text-truncate text-muted pointer",attrs:{href:"https://alphainsider.com/portfolio/"+t.strategy.user_id,target:"_blank",title:t.strategy.user_id}},[e("i",{staticClass:"fas fa-user"}),t._v(" "+t._s(t.strategy.user_id)+" ")]),t.strategy.private?e("small",{staticClass:"ml-2 mb-0"},[e("span",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"Private Strategy",expression:"'Private Strategy'",arg:"top"}],staticClass:"d-inline-block text-warning"},[e("i",{staticClass:"fas fa-lock"})])]):t._e(),t.strategy.type==="cryptocurrency"?e("small",{staticClass:"ml-2 mb-0"},[e("span",{staticClass:"badge badge-secondary"},[t._v("Crypto")])]):t._e(),t.$store.getters.user_id===t.strategy.user_id?e("small",{staticClass:"ml-2 mb-0"},[e("span",{staticClass:"badge badge-info"},[t._v("Owner")])]):t._e(),(t.$_.find(t.$store.state.strategySubscriptions,{strategy_id:t.strategy.strategy_id})||{}).status==="active"?e("small",{staticClass:"ml-2 mb-0"},[e("span",{staticClass:"badge badge-info"},[t._v("Following")])]):t._e()]),e("div",{staticClass:"col-3 d-flex align-items-center justify-content-around"},[e("small",{staticClass:"text-muted",attrs:{title:t.$formatNumber(t.strategy.subscriber_count)+" subscribers"}},[e("i",{staticClass:"fad fa-users"}),t._v(" "+t._s(t.$abbreviateNumber(t.strategy.subscriber_count))+" ")])])]),t.compact?t._e():e("div",{staticClass:"d-flex"},[e("p",{staticClass:"description-text-truncate text-justify text-muted mb-0",domProps:{innerHTML:t._s(t.strategy.description)}})])])},p=[];const h={props:{strategy:{type:Object,default:()=>({})},compact:{type:Boolean,default:!1}}},n={};var g=r(h,d,p,!1,v,"014aeaf2",null,null);function v(t){for(let a in n)this[a]=n[a]}var o=function(){return g.exports}(),y=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"search",staticClass:"input-group",class:{"input-shadow":t.searchInFocus},on:{keydown:function(s){if(!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter"))return null;s.preventDefault()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"form-control shadow-none border-right-0",attrs:{type:"text",placeholder:"Search Strategy..."},domProps:{value:t.searchInput},on:{input:[function(s){s.target.composing||(t.searchInput=s.target.value)},function(s){return t.searchStrategies()}],focus:function(s){t.searchInFocus=!0},keyup:function(s){if(!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter"))return null;t.searchResults.length>=1&&t.selectStrategy(t.searchResults[0])}}}),t.searchInFocus&&(t.searchInput||t.searchResults.length>0)?e("v-dropdown-menu",{staticClass:"w-100",attrs:{"stay-open":!0,"arrow-offset":12},on:{close:function(s){!t.$refs.search.contains(s.target)&&t.closeSearch()}}},[e("div",{staticClass:"search-list"},t._l(t.searchResults,function(s){return e("div",{key:s.strategy_id,staticClass:"dropdown-item",on:{click:function(i){return t.selectStrategy(s)}}},[e("v-strategy",{attrs:{strategy:s,compact:""}})],1)}),0),t.searchInput&&t.searchResults.length<=0?e("h6",{staticClass:"text-muted my-1"},[t._v("No Search Results")]):t._e()]):t._e(),e("div",{staticClass:"input-group-append",on:{click:function(s){t.searchInFocus=!0}}},[e("div",{staticClass:"search-button input-group-text bg-white"},[t.$store.state.loading.includes("searchStrategies")?t._e():e("i",{staticClass:"far fa-search",class:{active:t.searchInFocus}}),t.$store.state.loading.includes("searchStrategies")?e("i",{staticClass:"fas fa-spinner fa-pulse text-primary"}):t._e()])])],1)},f=[];const m={components:{vDropdownMenu:u,vStrategy:o},props:{strategyType:{type:String,default:"stock"}},data(){return{searchInput:"",searchInFocus:!1,searchResults:[],selectedStrategy:void 0}},methods:{searchStrategies:_.debounce(async function(){!this.searchInput||(await this.$store.dispatch("startLoading",{label:["stockSearch"]}),this.searchResults=await this.$store.dispatch("request",{type:"post",auth:!!this.$store.state.bot.alphainsider,url:"searchStrategies",loadingLabel:"searchStrategies",query:{search:this.searchInput,type:{includes:["stock"],excludes:[]},limit:6}}).catch(t=>{}),await this.$store.dispatch("finishLoading",{label:["stockSearch"]}))},500),selectStrategy(t){this.$emit("input",t),this.closeSearch()},closeSearch(){this.searchInput="",this.searchResults=[],this.searchInFocus=!1,this.$refs.search.firstChild.blur()}}},c={};var b=r(m,y,f,!1,C,"7372e2cb",null,null);function C(t){for(let a in c)this[a]=c[a]}var x=function(){return b.exports}(),S=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-strategy-search",{attrs:{"strategy-type":"stock"},on:{input:function(s){t.strategies=[s]}}}),t.strategies.length>0?e("div",{staticClass:"mt-3"},t._l(t.strategies,function(s,i){return e("div",{key:s.strategy_id,staticClass:"card",class:{"mt-2":i>0}},[e("div",{staticClass:"card-body"},[e("v-strategy",{attrs:{strategy:s}})],1)])}),0):e("div",{staticClass:"d-flex-column bg-light rounded text-muted text-center py-4 mt-3"},[e("h5",{staticClass:"my-2"},[t._v("No Strategies Selected")])]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-12 d-flex justify-content-end"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.strategies.length<=0,type:"submit"},on:{click:function(s){return t.updateAllocation()}}},[t._v("Save")])])])],1)},$=[];const k={components:{vStrategy:o,vStrategySearch:x},data(){return{strategies:[]}},async mounted(){this.strategies=await this.$store.dispatch("getAllocation")},methods:{async updateAllocation(){try{await this.$store.dispatch("request",{type:"post",auth:!0,url:"updateAllocation",query:{strategy_id:this.strategies[0].strategy_id}}),this.$emit("update")}catch{toastr.error("Failed to update bot trading settings.")}}}},l={};var w=r(k,S,$,!1,I,null,null,null);function I(t){for(let a in l)this[a]=l[a]}var j=function(){return w.exports}();export{o as a,j as v};
